# ADR 001: Хранение и рендеринг архитектурных диаграмм

## Статус
Принято

## Контекст
Проект требует динамического обновления архитектурных диаграмм. Использование статических картинок (например, из Draw.io) затрудняет версионность и быстрое внесение изменений. Необходимо внедрить подход "Diagrams as Code" с использованием PlantUML.

## Решение
Принято решение использовать следующую структуру и процесс:

1.  **Структура хранения**:
    *   Исходники диаграмм хранятся в папке `docs/diagrams/`, которая зеркалирует структуру основной документации.
    *   Для файла `docs/architecture.md` диаграммы располагаются в `docs/diagrams/architecture/*.puml`.
2.  **Процесс рендеринга**:
    *   Используется [plantuml-docker-renderer](https://github.com/VLMHyperBenchTeam/plantuml-docker-renderer) для автоматического рендеринга.
    *   Результаты рендеринга (PNG) сохраняются в той же папке, что и исходники: `docs/diagrams/architecture/*.png`.
3.  **Интеграция в документацию**:
    *   В Markdown-файлах вставляется ссылка на отрендеренное изображение.
    *   Под изображением обязательно размещается гиперссылка на соответствующий `.puml` файл исходника.
4.  **Оптимизация**:
    *   Рендеринг выполняется только для измененных частей документации.

## Последствия
*   **Плюсы**:
    *   Легкий поиск исходников диаграмм прямо из документации.
    *   Возможность предпросмотра изменений перед коммитом.
    *   Версионность схем вместе с кодом.
    *   Поддержка динамического обновления через Docker-рендерер.
*   **Минусы**:
    *   Необходимость хранения сгенерированных PNG в репозитории (для корректного отображения в веб-интерфейсах Git без плагинов).